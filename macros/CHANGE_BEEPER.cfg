[delayed_gcode CHANGE_BEEPER]
variable_fila_wait: 0
gcode:
  {% set WAITING = printer["gcode_macro CHANGE_BEEPER"].fila_wait|default(0) %}
  {% if WAITING %}
    change_tune
    UPDATE_DELAYED_GCODE ID=CHANGE_BEEPER DURATION=5
  {% else %}
    start_tones
    UPDATE_DELAYED_GCODE ID=CHANGE_BEEPER DURATION=0
  {% endif %}

[gcode_macro CHANGE_BEEP_DEBUG_ON]
gcode:
  SET_GCODE_VARIABLE MACRO=CHANGE_BEEPER VARIABLE=fila_wait VALUE=1
  UPDATE_DELAYED_GCODE ID=CHANGE_BEEPER DURATION=1

[gcode_macro CHANGE_BEEP_DEBUG_OFF]
gcode:
  SET_GCODE_VARIABLE MACRO=CHANGE_BEEPER VARIABLE=fila_wait VALUE=0
  UPDATE_DELAYED_GCODE ID=CHANGE_BEEPER DURATION=0