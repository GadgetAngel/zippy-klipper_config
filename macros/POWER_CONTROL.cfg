[gcode_macro POWEROFF]
gcode:
  M117 Shutdown
  WLED_OFF
  {action_call_remote_method("set_device_power",
                             device="Lighting",
                             state="off")}
  {action_call_remote_method("set_device_power",
                             device="Filter",
                             state="off")}
  {action_call_remote_method("set_device_power",
                             device="Printer",
                             state="off")}
  RESPOND TYPE=command MSG=action:poweroff

[gcode_macro POWER_OFF_PRINTER]
gcode:
  M117 Shutdown
  WLED_OFF
  {action_call_remote_method("set_device_power",
                             device="Lighting",
                             state="off")}
  {action_call_remote_method("set_device_power",
                             device="Filter",
                             state="off")}
  {action_call_remote_method("set_device_power",
                             device="Printer",
                             state="off")}

[gcode_macro POWER_OFF_LIGHTS]
gcode:
  WLED_OFF

[gcode_macro POWER_ON_LIGHTS]
gcode:
  WLED_ON

[gcode_macro POWER_OFF_FILTER]
gcode:
  {action_call_remote_method("set_device_power",
                             device="Filter",
                             state="off")}

[gcode_macro POWER_ON_FILTER]
gcode:
  {action_call_remote_method("set_device_power",
                             device="Filter",
                             state="on")}