[include skr-pico.cfg]

[printer]
kinematics: cartesian
max_velocity: 500
max_accel: 6000
max_z_velocity: 40
max_z_accel: 1000
square_corner_velocity: 5.0

[display_status]

[exclude_object]

[sdcard_loop]

[skew_correction]

[respond]

[virtual_sdcard]
path: /home/pi/gcode_files

[pause_resume]
recover_velocity: 100

# Support ArcWelder
[gcode_arcs]
resolution: 0.05

[firmware_retraction]
retract_length: 0.65
retract_speed: 60
unretract_speed: 60

[force_move]
enable_force_move: True

# Allow saving variables to file
[save_variables]
filename: ~/klipper_config/variables.cfg

[resonance_tester]
accel_chip_x: adxl345 hotend
accel_chip_y: adxl345 bed
probe_points:
    164, 136, 50   # Centered above bed
    20,  20,  5  # Front-Left
    200, 200, 5 # Back-Right

[input_shaper]
shaper_freq_x: 37.6
shaper_type_x: ei
shaper_freq_y: 47.2
shaper_type_y: 2hump_ei

# Probing position
[safe_z_home]
home_xy_position: 164, 136
speed: 240
z_hop: 5
z_hop_speed: 150
move_to_previous: True

# Bed Mesh config
[bed_mesh]
speed: 240
horizontal_move_z: 5
mesh_min: 10, 10
mesh_max: 205, 215
probe_count: 5, 5
mesh_pps: 5, 5
algorithm: bicubic

# Bed screw position and type
[screws_tilt_adjust]
screw1: 83,43
screw1_name: front left screw
screw2: 250,43
screw2_name: front right screw
screw3: 250,210
screw3_name: rear right screw
screw4: 83,210
screw4_name: rear left screw
horizontal_move_z: 10
speed: 50
screw_thread: CW-M4

[gcode_macro M808]
gcode:
    {% if params.K is not defined and params.L is defined %}SDCARD_LOOP_BEGIN COUNT={params.L|int}{% endif %}
    {% if params.K is not defined and params.L is not defined %}SDCARD_LOOP_END{% endif %}
    {% if params.K is defined and params.L is not defined %}SDCARD_LOOP_DESIST{% endif %}

# Initialize some variable defaults
[delayed_gcode macros_initialize]
initial_duration: 1
gcode:
  INITIALIZE_VARIABLE VARIABLE=park_x VALUE=5
  INITIALIZE_VARIABLE VARIABLE=park_y VALUE=223
  INITIALIZE_VARIABLE VARIABLE=park_z VALUE=150
  INITIALIZE_VARIABLE VARIABLE=bowden_len VALUE=100